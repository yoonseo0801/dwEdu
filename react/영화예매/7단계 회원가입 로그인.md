#  7ë‹¨ê³„ íšŒì›ê°€ì… ë¡œê·¸ì¸
> **ì‚¬ìš©ì ì¸ì¦ ê¸°ëŠ¥**, ì¦‰ **íšŒì›ê°€ì…ê³¼ ë¡œê·¸ì¸ ê¸°ëŠ¥**ì„ êµ¬í˜„í•´ ë³´ê² ìŠµë‹ˆë‹¤.

ì´ë²ˆ ë‹¨ê³„ì—ì„œëŠ” ë³´ì•ˆì ìœ¼ë¡œ ì™„ë²½í•œ ì‹œìŠ¤í…œë³´ë‹¤ëŠ” **ì¸ì¦ íë¦„ì˜ í•µì‹¬ ê°œë…**ì„ ì´í•´í•˜ëŠ” ë° ì´ˆì ì„ ë§ì¶”ê² ìŠµë‹ˆë‹¤. ì‹¤ì œ ìš´ì˜ í™˜ê²½ì—ì„œëŠ” ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™”(bcrypt), JWT (JSON Web Token) í† í° ë°œê¸‰, ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™ ë“± í›¨ì”¬ ë” ë³µì¡í•œ ê³¼ì •ì´ í•„ìš”í•˜ì§€ë§Œ, ì—¬ê¸°ì„œëŠ” ê¸°ë³¸ì ì¸ ì›ë¦¬ë¥¼ í•™ìŠµí•˜ê¸° ìœ„í•´ ê°„ë‹¨í•œ í˜•íƒœë¡œ êµ¬í˜„í•˜ê² ìŠµë‹ˆë‹¤.

ì´ë²ˆì—ë„ **[1ë¶€] ë°±ì—”ë“œ(Node.js)** ì™€ **[2ë¶€] í”„ë¡ íŠ¸ì—”ë“œ(React)** ë¡œ ë‚˜ëˆ„ì–´ ì§„í–‰í•©ë‹ˆë‹¤.

-----

### **[1ë¶€] âš™ï¸ Node.js ë°±ì—”ë“œ í™•ì¥**

ê¸°ì¡´ `movie-api-server`ì— íšŒì›ê°€ì…ê³¼ ë¡œê·¸ì¸ì„ ì²˜ë¦¬í•˜ëŠ” API ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.

**1. ì‚¬ìš©ì ë°ì´í„° ì €ì¥ì†Œ ìƒì„±**

ì‹¤ì œë¡œëŠ” ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ì§€ë§Œ, ì—¬ê¸°ì„œëŠ” ì„œë²„ê°€ ì‹¤í–‰ë˜ëŠ” ë™ì•ˆì—ë§Œ ìœ ì§€ë˜ëŠ” **ê°„ë‹¨í•œ ë°°ì—´**ì„ ì‚¬ìš©ì ì •ë³´ ì €ì¥ì†Œë¡œ ì‚¬ìš©í•˜ê² ìŠµë‹ˆë‹¤.

`movie-api-server` í´ë”ì— `users.js` íŒŒì¼ì„ ìƒˆë¡œ ë§Œë“­ë‹ˆë‹¤.

#### `movie-api-server/users.js`

```javascript
// ì„ì‹œ ì‚¬ìš©ì ë°ì´í„°ë² ì´ìŠ¤ ì—­í• ì„ í•˜ëŠ” ë°°ì—´
const users = [];

module.exports = users;
```

**2. `server.js`ì— ì¸ì¦ API ì¶”ê°€**

`movie-api-server/server.js` íŒŒì¼ì„ ì—´ê³  íšŒì›ê°€ì…ê³¼ ë¡œê·¸ì¸ API ë¡œì§ì„ ì¶”ê°€í•©ë‹ˆë‹¤.

```javascript
const express = require('express');
const cors = require('cors');
const movies = require('./movies');
const users = require('./users'); // ì‚¬ìš©ì ë°ì´í„° ê°€ì ¸ì˜¤ê¸°

const app = express();
const port = 5000;

app.use(cors());
app.use(express.json()); // POST ìš”ì²­ì˜ body(JSON)ë¥¼ íŒŒì‹±í•˜ê¸° ìœ„í•´ ì¶”ê°€

// --- ê¸°ì¡´ ì˜í™” API ---
app.get('/api/movies', (req, res) => {
  res.json(movies);
});

app.get('/api/movies/:id', (req, res) => {
  const movieId = parseInt(req.params.id, 10);
  const movie = movies.find(m => m.id === movieId);
  if (movie) res.json(movie);
  else res.status(404).send('Movie not found');
});

// --- ìƒˆë¡œìš´ ì¸ì¦ API ---

// API ì—”ë“œí¬ì¸íŠ¸ 3: íšŒì›ê°€ì…
app.post('/api/signup', (req, res) => {
  const { email, password } = req.body;

  // ê°„ë‹¨í•œ ìœ íš¨ì„± ê²€ì‚¬
  if (!email || !password) {
    return res.status(400).json({ message: 'ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.' });
  }

  // ì´ë©”ì¼ ì¤‘ë³µ í™•ì¸
  const userExists = users.find(user => user.email === email);
  if (userExists) {
    return res.status(409).json({ message: 'ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì´ë©”ì¼ì…ë‹ˆë‹¤.' });
  }

  // ìƒˆ ì‚¬ìš©ì ìƒì„± (idëŠ” ê°„ë‹¨í•˜ê²Œ ë°°ì—´ ê¸¸ì´ + 1ë¡œ ì§€ì •)
  const newUser = { id: users.length + 1, email, password };
  users.push(newUser);
  console.log('Current users:', users); // ì„œë²„ ì½˜ì†”ì—ì„œ í™•ì¸ìš©

  res.status(201).json({ message: 'íšŒì›ê°€ì… ì„±ê³µ!', user: newUser });
});

// API ì—”ë“œí¬ì¸íŠ¸ 4: ë¡œê·¸ì¸
app.post('/api/login', (req, res) => {
  const { email, password } = req.body;

  // ì‚¬ìš©ì ì°¾ê¸°
  const user = users.find(u => u.email === email && u.password === password);

  if (user) {
    // ì‹¤ì œë¡œëŠ” ì—¬ê¸°ì— JWT í† í°ì„ ìƒì„±í•´ì„œ ë³´ë‚´ì¤˜ì•¼ í•©ë‹ˆë‹¤.
    // ì§€ê¸ˆì€ ê°„ë‹¨í•˜ê²Œ ì‚¬ìš©ì ì •ë³´ì™€ ì„±ê³µ ë©”ì‹œì§€ë¥¼ ë³´ëƒ…ë‹ˆë‹¤.
    res.json({ message: 'ë¡œê·¸ì¸ ì„±ê³µ!', user: { id: user.id, email: user.email } });
  } else {
    res.status(401).json({ message: 'ì´ë©”ì¼ ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.' });
  }
});


app.listen(port, () => {
  console.log(`Movie API server listening at http://localhost:${port}`);
});
```

**3. ë°±ì—”ë“œ ì„œë²„ ì¬ì‹œì‘**

ì½”ë“œë¥¼ ìˆ˜ì •í–ˆìœ¼ë¯€ë¡œ, ì‹¤í–‰ ì¤‘ì´ë˜ Node.js ì„œë²„ë¥¼ `Ctrl + C`ë¡œ ì¤‘ì§€í•œ ë’¤ ë‹¤ì‹œ ì‹œì‘í•˜ì—¬ ë³€ê²½ì‚¬í•­ì„ ì ìš©í•©ë‹ˆë‹¤.

```bash
node server.js
```

-----

### **[2ë¶€] ğŸ–¥ï¸ ë¦¬ì•¡íŠ¸ í”„ë¡ íŠ¸ì—”ë“œ êµ¬í˜„**

ì´ì œ ì‚¬ìš©ìê°€ íšŒì›ê°€ì…í•˜ê³  ë¡œê·¸ì¸í•  ìˆ˜ ìˆëŠ” í˜ì´ì§€ì™€ í¼ì„ ë§Œë“­ë‹ˆë‹¤.

**1. ì¸ì¦ ê´€ë ¨ í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸ ìƒì„±**

`src/pages` í´ë”ì— `Signup.js`ì™€ `Login.js` íŒŒì¼ì„ ìƒì„±í•©ë‹ˆë‹¤.

#### `src/pages/Signup.js`

```javascript
import React, { useState } from 'react';
import { useNavigate } from 'react-router-dom';
import './AuthForm.css';

const Signup = () => {
    const [email, setEmail] = useState('');
    const [password, setPassword] = useState('');
    const navigate = useNavigate();

    const handleSubmit = async (e) => {
        e.preventDefault();
        try {
            const response = await fetch('http://localhost:5000/api/signup', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ email, password }),
            });
            const data = await response.json();
            if (response.ok) {
                alert(data.message); // "íšŒì›ê°€ì… ì„±ê³µ!"
                navigate('/login'); // ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™
            } else {
                alert(data.message); // "ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì´ë©”ì¼ì…ë‹ˆë‹¤." ë“±
            }
        } catch (error) {
            console.error('Signup error:', error);
            alert('íšŒì›ê°€ì… ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
        }
    };

    return (
        <div className="auth-container">
            <form className="auth-form" onSubmit={handleSubmit}>
                <h2>íšŒì›ê°€ì…</h2>
                <input
                    type="email"
                    placeholder="ì´ë©”ì¼"
                    value={email}
                    onChange={(e) => setEmail(e.target.value)}
                    required
                />
                <input
                    type="password"
                    placeholder="ë¹„ë°€ë²ˆí˜¸"
                    value={password}
                    onChange={(e) => setPassword(e.target.value)}
                    required
                />
                <button type="submit">ê°€ì…í•˜ê¸°</button>
            </form>
        </div>
    );
};

export default Signup;
```

#### `src/pages/Login.js`

```javascript
import React, { useState } from 'react';
import { useNavigate } from 'react-router-dom';
import './AuthForm.css';

const Login = () => {
    const [email, setEmail] = useState('');
    const [password, setPassword] = useState('');
    const navigate = useNavigate();

    const handleSubmit = async (e) => {
        e.preventDefault();
        try {
            const response = await fetch('http://localhost:5000/api/login', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ email, password }),
            });
            const data = await response.json();
            if (response.ok) {
                alert(data.message); // "ë¡œê·¸ì¸ ì„±ê³µ!"
                // ë¡œê·¸ì¸ ì„±ê³µ ì‹œ, ì‚¬ìš©ì ì •ë³´ë¥¼ localStorageì— ì €ì¥ (ê°„ë‹¨í•œ ë°©ì‹)
                localStorage.setItem('user', JSON.stringify(data.user));
                navigate('/'); // ë©”ì¸ í˜ì´ì§€ë¡œ ì´ë™
                window.location.reload(); // í—¤ë” UI ì—…ë°ì´íŠ¸ë¥¼ ìœ„í•´ í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨
            } else {
                alert(data.message); // "ì´ë©”ì¼ ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€..."
            }
        } catch (error) {
            console.error('Login error:', error);
            alert('ë¡œê·¸ì¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
        }
    };

    return (
        <div className="auth-container">
            <form className="auth-form" onSubmit={handleSubmit}>
                <h2>ë¡œê·¸ì¸</h2>
                <input
                    type="email"
                    placeholder="ì´ë©”ì¼"
                    value={email}
                    onChange={(e) => setEmail(e.target.value)}
                    required
                />
                <input
                    type="password"
                    placeholder="ë¹„ë°€ë²ˆí˜¸"
                    value={password}
                    onChange={(e) => setPassword(e.target.value)}
                    required
                />
                <button type="submit">ë¡œê·¸ì¸</button>
            </form>
        </div>
    );
};

export default Login;
```

**2. ì¸ì¦ í¼ ìŠ¤íƒ€ì¼ ì¶”ê°€**

`src/pages` í´ë”ì— `AuthForm.css` íŒŒì¼ì„ ë§Œë“¤ê³  ê³µí†µ ìŠ¤íƒ€ì¼ì„ ì¶”ê°€í•©ë‹ˆë‹¤.

#### `src/pages/AuthForm.css`

```css
.auth-container {
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 50px;
}

.auth-form {
    display: flex;
    flex-direction: column;
    width: 350px;
    padding: 30px;
    border: 1px solid #ddd;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}

.auth-form h2 {
    margin-bottom: 20px;
    text-align: center;
}

.auth-form input {
    padding: 12px;
    margin-bottom: 15px;
    border: 1px solid #ccc;
    border-radius: 4px;
    font-size: 1rem;
}

.auth-form button {
    padding: 12px;
    border: none;
    background-color: #333;
    color: white;
    font-size: 1.1rem;
    border-radius: 4px;
    cursor: pointer;
    transition: background-color 0.2s;
}

.auth-form button:hover {
    background-color: #555;
}
```

**3. ë¼ìš°íŒ… ì„¤ì • ì¶”ê°€ (`App.js`)**

`src/App.js` íŒŒì¼ì— ìƒˆë¡œ ë§Œë“  `Signup`ê³¼ `Login` í˜ì´ì§€ë¡œ ì´ë™í•  ìˆ˜ ìˆë„ë¡ ë¼ìš°íŠ¸ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.

```javascript
// ... ë‹¤ë¥¸ import êµ¬ë¬¸ë“¤
import Signup from './pages/Signup'; // Signup ì»´í¬ë„ŒíŠ¸ import
import Login from './pages/Login';   // Login ì»´í¬ë„ŒíŠ¸ import

function App() {
  return (
    <BrowserRouter>
      <Routes>
        <Route path="/" element={<Layout />}>
          <Route index element={<Home />} />
          <Route path="movies" element={<Movies />} />
          <Route path="movies/:movieId" element={<MovieDetail />} />
          <Route path="reserve" element={<Reserve />} />
          <Route path="signup" element={<Signup />} /> {/* íšŒì›ê°€ì… ê²½ë¡œ ì¶”ê°€ */}
          <Route path="login" element={<Login />} />   {/* ë¡œê·¸ì¸ ê²½ë¡œ ì¶”ê°€ */}
        </Route>
        
        <Route path="*" element={<NotFound />} />
      </Routes>
    </BrowserRouter>
  );
}

export default App;
```

**4. í—¤ë”(Header) UI ë³€ê²½**

ì‚¬ìš©ìì˜ ë¡œê·¸ì¸ ìƒíƒœì— ë”°ë¼ í—¤ë” ë©”ë‰´ë¥¼ ë™ì ìœ¼ë¡œ ë³€ê²½í•©ë‹ˆë‹¤. (ë¡œê·¸ì¸/íšŒì›ê°€ì… ë˜ëŠ” ë¡œê·¸ì•„ì›ƒ)

`src/components/Header/Header.js` íŒŒì¼ì„ ìˆ˜ì •í•©ë‹ˆë‹¤.

```javascript
import React from 'react';
import { Link, useNavigate } from 'react-router-dom';
import './Header.css';

const Header = () => {
  const navigate = useNavigate();
  // localStorageì—ì„œ ì‚¬ìš©ì ì •ë³´ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤. ì—†ìœ¼ë©´ null.
  const user = JSON.parse(localStorage.getItem('user'));

  const handleLogout = () => {
    localStorage.removeItem('user'); // ì‚¬ìš©ì ì •ë³´ ì‚­ì œ
    navigate('/'); // í™ˆìœ¼ë¡œ ì´ë™
    window.location.reload(); // ìƒˆë¡œê³ ì¹¨
  };

  return (
    <header className="header">
      <div className="logo">
        <Link to="/">ì˜í™” ì˜ˆë§¤ ì‚¬ì´íŠ¸</Link>
      </div>
      <nav className="nav">
        <ul>
          <li><Link to="/movies">ì˜í™”</Link></li>
          <li><Link to="/reserve">ì˜ˆë§¤</Link></li>
          {user ? (
            // ë¡œê·¸ì¸ëœ ìƒíƒœì¼ ë•Œ
            <>
              <li><span>{user.email}ë‹˜</span></li>
              <li><button onClick={handleLogout} className="logout-button">ë¡œê·¸ì•„ì›ƒ</button></li>
            </>
          ) : (
            // ë¡œê·¸ì•„ì›ƒëœ ìƒíƒœì¼ ë•Œ
            <>
              <li><Link to="/login">ë¡œê·¸ì¸</Link></li>
              <li><Link to="/signup">íšŒì›ê°€ì…</Link></li>
            </>
          )}
        </ul>
      </nav>
    </header>
  );
};

export default Header;
```

ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ì— ëŒ€í•œ ê°„ë‹¨í•œ ìŠ¤íƒ€ì¼ì„ `src/components/Header/Header.css` íŒŒì¼ì— ì¶”ê°€í•©ë‹ˆë‹¤.

```css
/* Header.css íŒŒì¼ ë§¨ ì•„ë˜ì— ì¶”ê°€ */
.logout-button {
  background: none;
  border: none;
  color: white;
  cursor: pointer;
  font-size: 1rem;
  font-family: inherit;
}

.logout-button:hover {
  color: #ddd;
}

.nav span {
  color: #a0a0a0; /* ì‚¬ìš©ì ì´ë©”ì¼ ìŠ¤íƒ€ì¼ */
}
```

-----

### **[3ë¶€] âœ… ì‹¤í–‰ ë° í™•ì¸**

1.  **ë°±ì—”ë“œ ì„œë²„**ì™€ **ë¦¬ì•¡íŠ¸ ê°œë°œ ì„œë²„**ê°€ ëª¨ë‘ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸í•©ë‹ˆë‹¤.
2.  ë¸Œë¼ìš°ì €ì—ì„œ `http://localhost:3000`ìœ¼ë¡œ ì ‘ì†í•©ë‹ˆë‹¤.
3.  í—¤ë” ìš°ì¸¡ì— '**ë¡œê·¸ì¸**'ê³¼ '**íšŒì›ê°€ì…**' ë©”ë‰´ê°€ ë³´ì…ë‹ˆë‹¤.
4.  **íšŒì›ê°€ì…**ì„ í´ë¦­í•˜ê³  ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì—¬ ê°€ì…í•©ë‹ˆë‹¤. ì„±ê³µí•˜ë©´ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.
5.  ë°©ê¸ˆ ê°€ì…í•œ ì •ë³´ë¡œ **ë¡œê·¸ì¸**í•©ë‹ˆë‹¤. ì„±ê³µí•˜ë©´ ë©”ì¸ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.
6.  ì´ì œ í—¤ë” ìš°ì¸¡ì— **ì‚¬ìš©ì ì´ë©”ì¼**ê³¼ '**ë¡œê·¸ì•„ì›ƒ**' ë²„íŠ¼ì´ ë³´ì…ë‹ˆë‹¤.
7.  **ë¡œê·¸ì•„ì›ƒ** ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ë‹¤ì‹œ ì´ˆê¸° ìƒíƒœë¡œ ëŒì•„ê°‘ë‹ˆë‹¤.

ì´ê²ƒìœ¼ë¡œ ê¸°ë³¸ì ì¸ ì‚¬ìš©ì ì¸ì¦ ê¸°ëŠ¥ êµ¬í˜„ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤\! ğŸ‘

**ì°¸ê³ :** `localStorage`ë¥¼ ì‚¬ìš©í•˜ê³  í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•˜ëŠ” ë°©ì‹ì€ ê°€ì¥ ê°„ë‹¨í•œ êµ¬í˜„ ì˜ˆì‹œì…ë‹ˆë‹¤. ì‹¤ì œ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œëŠ” \*\*ì „ì—­ ìƒíƒœ ê´€ë¦¬(Context API, Redux ë“±)\*\*ë¥¼ í†µí•´ ë¡œê·¸ì¸ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ì—¬, í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ ì—†ì´ë„ ëª¨ë“  ì»´í¬ë„ŒíŠ¸ê°€ ë¡œê·¸ì¸ ìƒíƒœ ë³€ê²½ì„ ì¦‰ì‹œ ì¸ì§€í•˜ë„ë¡ ë§Œë“œëŠ” ê²ƒì´ ì¼ë°˜ì ì…ë‹ˆë‹¤.
